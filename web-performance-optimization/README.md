# 웹 성능 최적화

### 이미지 지연 로딩 (intersection observer)
당장 눈에 보이는 요소가 아니라면, 나중에 다운로드를 받는다. 맨 처음에 보이는 요소의 리소스만 다운받아준다.
즉 이미지를 늦게 로딩한다는 것이다. (lazy loading 이라는 워딩이 너무 적합한것 같다.) 필요할때 이미지를 로드하겠다 라는 말이다.

그렇다면 처음에 로드되지 않는 이미지들은 언제 보여져야 하는가? => 유저가 그 이미지를 보려고 할때! 비로소 리소스를 로드하면된다, 즉 스크롤 이벤트를 이용해서 스크롤이 이미지의 위치까지 도달했는지를 판단한다.

하지만 단점이 있을 것 같다.. 스크롤이벤트는 스크롤할때마다 작동하기 때문에 전체적인 성능에 불이익을 가져다주지 않을까? 사용자들이 스크롤을 많이 하는데.. 당연히 안좋을 것 같다. 오히려 이미지 지연로딩을 구현하려다가, 스크롤 이벤트로 인해 성능이 더 저하 될 수 있다. => 이 부분을 해결하기 위해서 Intersection Observer 가 나왔다.

`Intersection Observer 는 브라우저가 자체적으로 지원하기때문에 이벤트를 등록하는 행위는 아니므로 성능적 이점을 가질 수 있다.

평소에 React에서는 타 라이브러리를 사용하고 Next.js 에서는 기본적으로 image lazy loading을 적용시켜주기 때문에 수동적으로 적용해준적이 없다.
이번에는 수동적으로 적용을 해보겠다.

img 태그의 data-src 에 src로 들어갈 이미지 소스를 넣어뒀다가, observe를 통해서 이미지 태그가 보인다면 src 에 data-src에 넣어주는 로직을 구현하면 된다.

![image](https://user-images.githubusercontent.com/69495129/195502446-fa7fb565-1408-4cee-8dcb-27f784214b2c.png)

